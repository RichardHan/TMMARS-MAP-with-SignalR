<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Detection Map</title>
    <link rel="stylesheet" href="css/map.css">
</head>
<body>
    <div id="dailyMars" style="TEXT-ALIGN: center;">
        <span class="title">Apps scanned:</span>
        <span id="appNum"> </span>&nbsp;&nbsp;&nbsp;&nbsp;
        <span class="title">Malware detected:</span>
        <span id="virusNum"> </span>
    </div>
    <div id="map" class="clear">
        <div id="container" style="position: relative; width: 100%; height: 100%; ">
            <img src="images/worldmap1280x500.png" style="position:absolute" width="1280" height="500">
            <canvas id="backCanvas" width="3000" height="2000" style="position:absolute"> </canvas>
            <canvas id="demoCanvas" width="3000" height="2000" style="position:absolute"> </canvas>
        </div>
    </div>
    <div id="topVirus" class="pie">
    </div>
    <div id="topApp" class="pie">
    </div>
    <div id="marquee_box">
        <ul id="marquee" class="marquee"></ul>
    </div>
    <!-- JS Lib -->

    <script type="text/javascript" src="js/namespace.js"></script>
    <script type="text/javascript" src="js/configuration.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script src="Scripts/jquery.signalR-2.2.0.js"></script>
    <script src="/signalr/hubs"></script>
    <script type="text/javascript" src="js/easeljs-0.5.0.min.js"></script>
    <script type="text/javascript" src="js/tweenjs-0.3.0.min.js"></script>
    <script type="text/javascript" src="js/BrowserDetect.js"></script>
    <script type="text/javascript" src="js/highcharts.js"></script>
    <script type="text/javascript" src="js/exporting.js"></script>
    <!-- JS Init -->
    <script type="text/javascript" src="js/map.js"></script>
    <script type="text/javascript" src="js/dailyMars.js"></script>
    <script type="text/javascript" src="js/pie.js"></script>
    <script type="text/javascript" src="js/resize.js"></script>
    <!--Reference the SignalR library. -->
    <!--Reference the autogenerated SignalR hub script. -->
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {

            //var marsHub = $.connection.mARSHub;

            $.connection.mARSHub.client.updatetopApp = function (result) {
                var fnCallback = callBack["cbUpdate_topApp"];
                fnCallback($.parseJSON(result));
            };

            $.connection.mARSHub.client.updatetopVirus = function (result) {
                var fnCallback = callBack["cbUpdate_topVirus"];
                fnCallback($.parseJSON(result));
            };

            $.connection.mARSHub.client.updatecircles = function (result) {
                var fnCallback = window["cbUpdate_circles"];
                fnCallback($.parseJSON(result));
            };

            $.connection.mARSHub.client.updatedots = function (result) {
                var fnCallback = window["cbUpdate_dots"];
                fnCallback($.parseJSON(result));
            };

            $.connection.mARSHub.client.updatenews = function (result) {
                var fnCallback = window["cbUpdate_news"];
                fnCallback($.parseJSON(result));
            };

            $.connection.mARSHub.client.updateDailyNumber = function (result) {
                GetdataFromAPI_JSON = $.parseJSON(result);
                UpdateUINumber($.parseJSON(result));
                setInterval(RefreshUINumber, 1000);
                setInterval(UpdateDailyMars, 1000);
            };

            $.connection.mARSHub.client.alertFromServer = function (result) {
                alert(result);
            };

            $.connection.hub.start().done(function () {
                $.connection.mARSHub.server.updateDailyNumber();
                $.connection.mARSHub.server.updatenews();
                $.connection.mARSHub.server.updatedots();
                $.connection.mARSHub.server.updatecircles();
                $.connection.mARSHub.server.updatetopApp();
                $.connection.mARSHub.server.updatetopVirus();
            });
        });
    </script>
</body>
</html>
